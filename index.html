<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Vendoo - Dashboard</title>

<!-- Google Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">

<!-- Bootstrap Icons -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">

<!-- Chart.js -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
body {
    font-family: 'Inter', sans-serif;
    margin: 0;
    padding: 20px;
    background: #f0f2f5;
    display: flex;
    flex-direction: column;
    align-items: center;
}

/* Dashboard title */
.titulo-dashboard {
    font-size: 22px;
    font-weight: 700;
    color: #000;
    margin-bottom: 14px;
    align-self: flex-start;
}

/* Card */
.card {
    width: 270px;
    background: #fff;
    border-radius: 12px;
    padding: 20px;
    box-shadow: 0 6px 20px rgba(0,0,0,0.08);
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 20px;
    position: relative;
}

/* Espaço entre cards */
#cardMetricas { margin-bottom: 50px; }

/* Botão de período */
#btnPeriodo {
    width: 100%;
    height: 40px;
    padding: 0 12px;
    border-radius: 7px;
    border: 1px solid #ddd;
    background: #fafafa;
    font-weight: 600;
    display: flex;
    justify-content: space-between;
    align-items: center;
    cursor: pointer;
    position: relative;
    margin-bottom:7px;
}

#btnPeriodo::before {
    content: "PERÍODO";
    position: absolute;
    top: -10px;
    left: 12px;
    background: #fff;
    padding: 0 6px;
    font-size: 12px;
    color: #555;
    font-weight: bold;
}

.arrow { transition: transform 0.3s ease; }

/* Dropdown */
#periodoDrop {
    display: none;
    position: absolute;
    top: 50px;
    left: 50%;
    transform: translateX(-50%);
    width: 95%;
    flex-direction: column;
    border: 1px solid #ddd;
    border-radius: 10px;
    background: #fff;
    box-shadow: 0 6px 15px rgba(0,0,0,0.08);
    z-index: 10;
    padding: 8px 0;
}

.option {
    padding: 10px 16px;
    cursor: pointer;
    transition: background 0.2s;
}

.option:hover, .option.selected {
    background: #e0e0e0;
}

#btnCalendario {
    margin: 8px 16px;
    padding: 8px;
    cursor: pointer;
    border-radius: 6px;
    border: 1px solid #ccc;
    background: #f9f9f9;
    text-align: center;
}

#calendarInput { position: absolute; left: -9999px; }

/* Seções verticais */
.secao {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 4px;
    width: 100%;
    margin-bottom:8px;
}

.secao-icon { font-size: 30px; color: #007bff; }

.titulo { font-weight: bold; font-size: 14px; text-align: center; }
.valor { font-size: 17px; font-weight: normal; text-align: center; }

/* Cores por seção */
.faturamento { color: #228B22; }
.vendas { color: #007bff; }
.conversao { color: #FFA500; }
.ticket { color: #8A2BE2; }

/* Card gráfico */
#cardGrafico {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 30px 20px;
}

/* Título dentro do card do gráfico */
.titulo-grafico {
    font-weight: 700;
    font-size: 18px;
    margin-bottom: 20px;
    text-align: center;
}

/* Gráfico */
#chartContainer {
    position: relative;
    width: 300px;
    height: 300px;
}

.total-vendas {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    text-align: center;
}

.total-vendas div:first-child {
    font-size: 16px;
    font-weight: bold;
    color: #555;
}

.total-vendas div:last-child {
    font-size: 20px;
    font-weight: bold;
    color: #000;
}
</style>
</head>
<body>

<div class="titulo-dashboard">Dashboard</div>

<!-- Card de métricas -->
<div id="cardMetricas" class="card">
    <!-- Botão de período -->
    <div id="btnPeriodo">
        <span id="periodoSelected">Hoje</span>
        <i class="bi bi-chevron-down arrow"></i>
    </div>

    <!-- Dropdown -->
    <div id="periodoDrop">
        <div class="option selected" data-value="Hoje">Hoje</div>
        <div class="option" data-value="Ontem">Ontem</div>
        <div class="option" data-value="Últimos 7 dias">Últimos 7 dias</div>
        <div class="option" data-value="Últimos 30 dias">Últimos 30 dias</div>
        <div id="btnCalendario">Calendário</div>
        <input type="date" id="calendarInput">
    </div>

    <!-- Seções -->
    <div class="secao">
        <i class="bi bi-cash-coin secao-icon"></i>
        <div class="titulo">Faturamento</div>
        <div class="valor faturamento">100 MZN</div>
    </div>

    <div class="secao">
        <i class="bi bi-cart-check-fill secao-icon"></i>
        <div class="titulo">Vendas Realizadas</div>
        <div class="valor vendas">50</div>
    </div>

    <div class="secao">
        <i class="bi bi-graph-up secao-icon"></i>
        <div class="titulo">Taxa de Conversão</div>
        <div class="valor conversao">6%</div>
    </div>

    <div class="secao">
        <i class="bi bi-receipt secao-icon"></i>
        <div class="titulo">Ticket Médio</div>
        <div class="valor ticket">2 MZN</div>
    </div>
</div>

<!-- Card do gráfico -->
<div id="cardGrafico" class="card">
    <!-- Título do gráfico dentro do card -->
    <div class="titulo-grafico">Gráfico de Vendas</div>

    <div id="chartContainer">
        <canvas id="vendasChart"></canvas>
        <div class="total-vendas">
            <div>TOTAL</div>
            <div id="totalVendido">0 MZN</div>
        </div>
    </div>
</div>

<script>
// Dropdown
const btnPeriodo = document.getElementById("btnPeriodo");
const periodoDrop = document.getElementById("periodoDrop");
const options = document.querySelectorAll(".option");
const periodoSelected = document.getElementById("periodoSelected");
const btnCalendario = document.getElementById("btnCalendario");
const calendarInput = document.getElementById("calendarInput");
let customDateSelected = false;

btnPeriodo.addEventListener("click", () => {
    periodoDrop.style.display = periodoDrop.style.display === "flex" ? "none" : "flex";
});

options.forEach(opt => {
    opt.addEventListener("click", () => {
        options.forEach(o => o.classList.remove("selected"));
        opt.classList.add("selected");
        periodoSelected.textContent = opt.dataset.value;
        customDateSelected = false;
        periodoDrop.style.display = "none";
    });
});

btnCalendario.addEventListener("click", () => {
    calendarInput.focus();
    calendarInput.click();
});

calendarInput.addEventListener("change", () => {
    const date = new Date(calendarInput.value);
    if(date.toString() !== "Invalid Date"){
        const day = String(date.getDate()).padStart(2,'0');
        const month = String(date.getMonth()+1).padStart(2,'0');
        const year = date.getFullYear();
        periodoSelected.textContent = `${day}/${month}/${year}`;
        customDateSelected = true;
        options.forEach(o => o.classList.remove("selected"));
        periodoDrop.style.display = "none";
    }
});

// Gráfico de vendas
const vendasMpesa = 120;
const vendasEmola = 80;
const totalVendas = vendasMpesa + vendasEmola;
document.getElementById('totalVendido').textContent = totalVendas + ' MZN';

const ctx = document.getElementById('vendasChart').getContext('2d');

new Chart(ctx, {
    type: 'doughnut',
    data: {
        labels: ['M-Pesa', 'E-Mola'],
        datasets: [{
            data: [vendasMpesa, vendasEmola],
            backgroundColor: ['#FF4136', '#FFA500'],
            hoverOffset: 10
        }]
    },
    options: {
        plugins: {
            tooltip: {
                callbacks: {
                    label: function(context) {
                        const valor = context.raw;
                        const percent = ((valor / totalVendas) * 100).toFixed(1);
                        return `${context.label}: ${valor} MZN (${percent}%)`;
                    }
                }
            },
            legend: { position: 'bottom' }
        },
        cutout: '60%'
    }
});
</script>

</body>
</html>
