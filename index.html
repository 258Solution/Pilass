<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dashboard Vendoo</title>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
:root {
  --bg-color: #ffffff;
  --text-color: #1f1f1f;
  --card-bg: #f8fafc;
  --shadow-color: rgba(0,0,0,0.08);
  --menu-text: #2b2b2b;
}

.dark-mode {
  --bg-color: #121212;
  --text-color: #eaeaea;
  --card-bg: #181818;
  --shadow-color: rgba(0,0,0,0.5);
  --menu-text: #bfbfbf;
}

body {
  margin:0;
  font-family: Arial, sans-serif;
  background-color: var(--bg-color);
  color: var(--text-color);
  transition: background-color 0.4s ease, color 0.4s ease;
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:16px;
  padding-bottom:70px; /* espaço para rodapé */
}

/* CARDS */
.card, .chart-card{
  background:var(--card-bg);
  border-radius:16px;
  padding:16px;
  box-shadow:0 6px 20px rgba(0,0,0,0.1);
  width:100%;
  max-width:280px;
  margin-top:20px;
}

/* TÍTULOS */
.titulo-dashboard{
  font-weight:700;
  font-size:18px;
  margin-bottom:2px;
  text-align:left;
  width:100%
}

/* BOTÃO PERÍODO */
#periodoWrapper {
  position:relative; 
  width:160px; 
  margin:0 auto 12px;
}

.label-wrapper {
  position:absolute;
  top:-10px;
  left:50%;
  transform:translateX(-50%);
  background: var(--card-bg);
  padding:0 6px;
  font-size:12px;
  color:var(--text-color);
  font-weight:600;
  z-index:2;
}

#btnPeriodo {
  display:flex;
  justify-content:space-between;
  align-items:center;
  border:1px solid #ccc;
  border-radius:8px;
  padding:8px 12px;
  background: var(--card-bg);
  color: var(--text-color);
  cursor:pointer;
  position:relative;
  z-index:1;
  margin-bottom:10px;
}

#periodoDrop {
  display:none;
  flex-direction:column;
  border:1px solid #ccc;
  background: var(--card-bg);
  border-radius:8px;
  margin-top:4px;
  width:160px;
  position:absolute;
  top:100%;
  left:50%;
  transform:translateX(-50%);
  z-index:5;
  box-shadow:0 4px 8px rgba(0,0,0,0.1);
}

.option{
  padding:6px 10px;
  cursor:pointer;
  color: var(--text-color);
}

.option.selected{
  background: rgba(0,0,0,0.05);
}

/* Esconde input date */
#calendarInput { 
    position: absolute; 
    left: -9999px; 
}

/* Seções verticais */
.secao {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 4px;
  width: 100%;
  margin-bottom:12px;
}

.secao-icon { font-size: 35px; }

.titulo { font-weight: bold; font-size: 15px; text-align: center; }
.valor { font-size: 17px; font-weight: normal; text-align: center; }

.faturamento { color: #228B22; }
.vendas { color: #007bff; }
.conversao { color: #FFA500; }
.ticket { color: #8A2BE2; }

/* GRÁFICO */
.chart-card .chart-wrap{
  width:100%;
  height:180px;
  position:relative;
}

.center-total{
  position:absolute;
  top:50%;
  left:50%;
  transform:translate(-50%,-50%);
  text-align:center;
  pointer-events:none;
}

.center-total .label{
  color:var(--text-color);
  font-size:12px;
}

.center-total .num{
  font-weight:700;
  font-size:16px;
  margin-top:4px;
}

.legend-row{
  display:flex;
  gap:12px;
  justify-content:center;
  margin-top:6px;
}

.legend-item{
  display:flex;
  gap:6px;
  align-items:center;
  font-size:12px;
  color:var(--text-color);
  cursor:pointer;
}

.legend-swatch{
  width:10px;
  height:10px;
  border-radius:2px;
}

/* RODAPÉ */
footer {
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  background: var(--card-bg);
  color: var(--text-color);
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 10px 16px;
  box-shadow: 0 -2px 10px var(--shadow-color);
  z-index: 1000;
}

.footer-left {
  display: flex;
  align-items: center;
  gap: 8px;
}

.logo-square {
  width: 28px;
  height: 28px;
  background: var(--bg-color);
  border: 2px solid var(--text-color);
  display: flex;
  justify-content: center;
  align-items: center;
  border-radius: 5px;
  font-size: 16px;
  font-weight: 700;
  color: var(--text-color);
  box-shadow: 1px 1px 3px rgba(0,0,0,0.2);
  transition: transform 0.2s ease;
}
.logo-square:hover { transform: scale(1.06); }

.logo-text {
  font-size: 16px;
  font-weight: 700;
  letter-spacing: 0.5px;
  color: var(--text-color);
}

.footer-right {
  display: flex;
  align-items: center;
  gap: 20px;
}

#toggle-theme, #menu-btn {
  background: none;
  border: none;
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 6px;
  font-weight: 600;
  color: var(--text-color);
}
#toggle-theme { font-size: 23px; }
#menu-btn { font-size: 18px; }
#toggle-theme:hover, #menu-btn:hover { transform: scale(1.05); } 

/* MENU LATERAL */
#side-menu {
  position: fixed;
  top: 0;
  right: -50%;
  width: 50%;
  height: 100%;
  background-color: var(--card-bg);
  box-shadow: -2px 0 10px var(--shadow-color);
  transition: right 0.3s ease;
  z-index: 1002;
  padding-top: 50px;
  display: flex;
  flex-direction: column;
  gap: 6px;
}
#side-menu.active { right: 0; }
#close-menu {
  position: absolute;
  top: 10px;
  left: 15px;
  font-size: 25px;
  background: none;
  border: none;
  cursor: pointer;
  color: var(--menu-text);
  opacity: 0.85;
  transition: opacity 0.2s;
}
#close-menu:hover { opacity: 1; }
.side-menu-item {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px 20px;
  font-size: 16px;
  font-weight: 600;
  color: var(--menu-text);
  cursor: pointer;
  border-radius: 8px;
  transition: background 0.2s, opacity 0.2s;
  opacity: 0.85;
}
.side-menu-item:hover { background-color: rgba(0,0,0,0.05); opacity: 1; }
.side-menu-item i { font-size: 22px; color: var(--menu-text); opacity:0.85; }
</style>
</head>
<body>

<!-- CARD DE MÉTRICAS -->
<div class="card">

  <!-- Botão Período -->
  <div id="periodoWrapper">
      <div class="label-wrapper">Período</div>
      <div id="btnPeriodo">
          <span id="periodoSelected">Hoje</span>
          <i class="bi bi-chevron-down arrow"></i>
      </div>
      <div id="periodoDrop">
          <div class="option selected" data-value="Hoje">Hoje</div>
          <div class="option" data-value="Ontem">Ontem</div>
          <div class="option" data-value="Últimos 7 dias">Últimos 7 dias</div>
          <div class="option" data-value="Últimos 30 dias">Últimos 30 dias</div>
          <div id="btnCalendario" class="option">Calendário</div>
          <input type="date" id="calendarInput">
      </div>
  </div>

  <!-- Seções -->
  <div class="secao">
      <i class="bi bi-cash-coin secao-icon"></i>
      <div class="titulo">Faturamento</div>
      <div class="valor faturamento">100 MZN</div>
  </div>

  <div class="secao">
      <i class="bi bi-cart-check-fill secao-icon"></i>
      <div class="titulo">Vendas Realizadas</div>
      <div class="valor vendas">50</div>
  </div>

  <div class="secao">
      <i class="bi bi-graph-up secao-icon"></i>
      <div class="titulo">Taxa de Conversão</div>
      <div class="valor conversao">6%</div>
  </div>

  <div class="secao">
      <i class="bi bi-receipt secao-icon"></i>
      <div class="titulo">Ticket Médio</div>
      <div class="valor ticket">2 MZN</div>
  </div>
</div>

<!-- CARD GRÁFICO -->
<div class="chart-card">
  <div class="chart-title">Gráfico de Vendas</div>
  <div class="chart-wrap">
    <canvas id="doughnutChart"></canvas>
    <div class="center-total">
      <div class="label">TOTAL</div>
      <div class="num" id="centerValue">0 MT</div>
      <div style="font-size:11px;color:var(--text-color);margin-top:4px;">M-Pesa + E-Mola</div>
    </div>
  </div>
  <div class="legend-row">
    <div class="legend-item" data-index="0"><div class="legend-swatch" style="background:#FF4136"></div>M-Pesa</div>
    <div class="legend-item" data-index="1"><div class="legend-swatch" style="background:#FFA500"></div>E-Mola</div>
  </div>
</div>

<!-- RODAPÉ -->
<footer>
  <div class="footer-left">
    <div class="logo-square">V</div>
    <div class="logo-text">Vendoo</div>
  </div>
  <div class="footer-right">
    <button id="toggle-theme" aria-label="Alternar tema">
      <i id="theme-icon" class="bi bi-sun"></i>
    </button>
    <button id="menu-btn" aria-label="Abrir menu">
      Menu <i class="bi bi-chevron-right"></i>
    </button>
  </div>
</footer>

<!-- MENU LATERAL -->
<div id="side-menu">
  <button id="close-menu"aria-label="Fechar menu"><i class="bi bi-chevron-left"></i></button>
  
  <div class="side-menu-item"onclick="window.location.href='index.html';"><i class="bi bi-house"></i> Dashboard</div>
  
<div class="side-menu-item" onclick="window.location.href='produto.html';">
  <i class="bi bi-box-seam"></i> Produto</div>
  
  <div class="side-menu-item"><i class="bi bi-cash-stack"></i> Meu checkout</div>
  <div class="side-menu-item"><i class="bi bi-person-bounding-box"></i> Perfil</div>
</div>

<script>
const fmt = n => new Intl.NumberFormat('pt-MZ').format(Math.round(n));

// Dropdown Período
const btnPeriodo = document.getElementById("btnPeriodo");
const periodoDrop = document.getElementById("periodoDrop");
const options = document.querySelectorAll(".option");
const periodoSelected = document.getElementById("periodoSelected");
const btnCalendario = document.getElementById("btnCalendario");
const calendarInput = document.getElementById("calendarInput");

btnPeriodo.addEventListener("click", () => {
    periodoDrop.style.display = periodoDrop.style.display === "flex" ? "none" : "flex";
});

options.forEach(opt => {
    opt.addEventListener("click", () => {
        if(opt.id !== "btnCalendario"){
            options.forEach(o => o.classList.remove("selected"));
            opt.classList.add("selected");
            periodoSelected.textContent = opt.dataset.value;
            periodoDrop.style.display = "none";
        }
    });
});

btnCalendario.addEventListener("click", () => {
    calendarInput.focus();
    calendarInput.click();
});

calendarInput.addEventListener("change", () => {
    const date = new Date(calendarInput.value);
    if(date.toString() !== "Invalid Date"){
        const day = String(date.getDate()).padStart(2,'0');
        const month = String(date.getMonth()+1).padStart(2,'0');
        const year = date.getFullYear();
        periodoSelected.textContent = `${day}/${month}/${year}`;
        options.forEach(o => o.classList.remove("selected"));
        periodoDrop.style.display = "none";
    }
});

// Gráfico
const mpesa = 4000;
const emola = 2400;
const total = mpesa + emola;
document.getElementById('centerValue').textContent = fmt(total)+' MT';

const ctx = document.getElementById('doughnutChart').getContext('2d');
const doughnutChart = new Chart(ctx, {
  type:'doughnut',
  data:{
    labels:['M-Pesa','E-Mola'],
    datasets:[{
      data:[mpesa, emola],
      backgroundColor:['#FF4136','#FFA500']
    }]
  },
  options:{
    cutout:'62%',
    plugins:{ legend:{ display:false } },
    maintainAspectRatio:false
  }
});

const legendItems = document.querySelectorAll('.legend-item');
legendItems.forEach(item => {
  item.addEventListener('click', () => {
    const idx = item.dataset.index;
    const meta = doughnutChart.getDatasetMeta(0);
    meta.data[idx].hidden = !meta.data[idx].hidden;
    doughnutChart.update();
  });
});

// Alternar tema claro/escuro
const toggleBtn = document.getElementById('toggle-theme');
toggleBtn.addEventListener('click', () => {
  document.body.classList.toggle('dark-mode');
  const themeIcon = document.getElementById('theme-icon');
  if (document.body.classList.contains('dark-mode')) {
    themeIcon.classList.replace('bi-sun', 'bi-moon');
  } else {
    themeIcon.classList.replace('bi-moon', 'bi-sun');
  }
});

// Modo escuro automático
if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
  document.body.classList.add('dark-mode');
  document.getElementById('theme-icon').classList.replace('bi-sun', 'bi-moon');
}

// Menu lateral
const menuBtn = document.getElementById('menu-btn');
const sideMenu = document.getElementById('side-menu');
const closeMenu = document.getElementById('close-menu');

menuBtn.addEventListener('click', () => {
  sideMenu.classList.add('active');
  menuBtn.style.display = 'none';
});

closeMenu.addEventListener('click', () => {
  sideMenu.classList.remove('active');
  menuBtn.style.display = 'flex';
});
</script>

</body>
</html>
