<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dashboard Compacto</title>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
  body {
    font-family: Inter, sans-serif;
    background: #f3f4f6;
    margin: 0;
    padding: 20px;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 20px;
  }

  .wrap {
    display: flex;
    flex-direction: column;
    gap: 20px;
    width: 100%;
    max-width: 700px;
  }

  .card {
    background: #fff;
    border-radius: 10px;
    padding: 12px;
    box-shadow: 0 6px 20px rgba(0,0,0,0.08);
  }

  .title {
    font-weight: 700;
    font-size: 16px;
    margin-bottom: 8px;
  }

  /* Funil */
  .funil {
    display: flex;
    flex-direction: column;
    gap: 8px;
  }
  .step {
    display: flex;
    flex-direction: column;
    gap: 2px;
  }
  .step-head {
    display: flex;
    justify-content: space-between;
    font-size: 12px;
    color: #6b7280;
  }
  .bar-wrap {
    height: 12px;
    background: #eef2f7;
    border-radius: 999px;
    overflow: hidden;
  }
  .bar {
    height: 100%;
    border-radius: 999px;
  }
  .impr { background: #2563eb; }
  .click { background: #f59e0b; }
  .lead { background: #16a34a; }
  .cart { background: #ec4899; }
  .checkout { background: #7c3aed; }
  .buy { background: #ff6a88; }

  /* Gráfico de vendas */
  .chart-card {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 12px;
    gap: 6px;
  }

  .chart-title { font-weight: 700; font-size: 16px; margin-bottom: 6px; }
  .chart-wrap { position: relative; width: 200px; height: 200px; }
  .center-total {
    position: absolute;
    top: 50%; left: 50%;
    transform: translate(-50%,-50%);
    text-align: center;
    pointer-events: none;
  }
  .center-total .label { font-size: 12px; color: #6b7280; }
  .center-total .num { font-weight: 700; font-size: 16px; margin-top: 2px; }
  .center-total .sub { font-size: 10px; color: #6b7280; margin-top: 2px; }

  .perf {
    display: flex;
    gap: 6px;
    width: 100%;
    justify-content: space-between;
    margin-top: 6px;
  }
  .box {
    flex: 1;
    background: #fbfdff;
    padding: 6px;
    border-radius: 8px;
    border: 1px solid #eef2f7;
    text-align: center;
    font-size: 12px;
  }
  .box .v { font-weight: 600; font-size: 14px; }
  .box .t { font-size: 10px; color: #6b7280; }
</style>
</head>
<body>

<div class="wrap">

  <!-- Card Funil -->
  <div class="card" id="cardFunil">
    <div class="title">Funil de Conversão</div>
    <div class="funil" id="funil">
      <!-- Steps gerados por JS -->
    </div>
  </div>

  <!-- Card Gráfico -->
  <div class="card chart-card" id="cardGrafico">
    <div class="chart-title">Gráfico de Vendas</div>
    <div class="chart-wrap">
      <canvas id="doughnutChart" width="200" height="200"></canvas>
      <div class="center-total">
        <div class="label">TOTAL</div>
        <div class="num" id="centerValue">0 MT</div>
        <div class="sub">M-Pesa + E-Mola</div>
      </div>
    </div>
    <div class="perf">
      <div class="box">
        <div class="v" id="profitBox">0 MT</div>
        <div class="t">Lucro</div>
      </div>
      <div class="box">
        <div class="v" id="roiBox">0%</div>
        <div class="t">ROI</div>
      </div>
      <div class="box">
        <div class="v" id="cpaBox">0 MT</div>
        <div class="t">Custo por Venda</div>
      </div>
    </div>
  </div>

</div>

<script>
const funilData = [
  {name:'Impressões', value:35000, color:'#2563eb'},
  {name:'Cliques', value:2120, color:'#f59e0b'},
  {name:'Leads', value:420, color:'#16a34a'},
  {name:'Adições ao carrinho', value:90, color:'#ec4899'},
  {name:'Início de checkout', value:50, color:'#7c3aed'},
  {name:'Vendas', value:32, color:'#ff6a88'}
];

function buildFunnel(){
  const funil = document.getElementById('funil');
  const max = Math.max(...funilData.map(s=>s.value));
  funil.innerHTML = '';
  funilData.forEach(s=>{
    const step = document.createElement('div');
    step.className='step';
    const pct = ((s.value/max)*100).toFixed(1);
    step.innerHTML = `
      <div class="step-head">
        <div>${s.name}</div>
        <div>${s.value}</div>
      </div>
      <div class="bar-wrap"><div class="bar" style="width:${pct}%; background:${s.color}"></div></div>
    `;
    funil.appendChild(step);
  });
}
buildFunnel();

// Gráfico
const mpesa = 4000, emola=2400;
const ctx = document.getElementById('doughnutChart').getContext('2d');
new Chart(ctx,{
  type:'doughnut',
  data:{
    labels:['M-Pesa','E-Mola'],
    datasets:[{
      data:[mpesa,emola],
      backgroundColor:['#FF4136','#FFA500']
    }]
  },
  options:{
    cutout:'62%',
    plugins:{legend:{display:false}}
  }
});
document.getElementById('centerValue').textContent=(mpesa+emola)+' MT';
document.getElementById('profitBox').textContent='6400 MT';
document.getElementById('roiBox').textContent='233%';
document.getElementById('cpaBox').textContent='120 MT';
</script>
</body>
</html>
